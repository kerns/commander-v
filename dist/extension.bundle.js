(()=>{var e={12:(e,t,r)=>{const n=r(398),o=r(928),i=r(216)({}),{generateProjectTree:s}=r(73);async function a(e){const t=await n.workspace.fs.readDirectory(n.Uri.file(e)),r=[];for(const[i,s]of t)if(s===n.FileType.File){const t=o.join(e,i),s=n.Uri.file(t);c(await n.workspace.fs.readFile(s))||r.push(t)}else if(s===n.FileType.Directory){const t=o.join(e,i),n=await a(t);r.push(...n)}return r}function c(e){return e.some((e=>0===e))}e.exports={activate:function(e){let t=n.commands.registerCommand("extension.commanderV",(async(e,t)=>{if(!e){const r=n.window.activeTextEditor;if(!r||"file"!==r.document.uri.scheme)return void n.window.showInformationMessage("No file or folder selected.");t=[e=r.document.uri]}Array.isArray(t)||(t=[e]);const p=n.workspace.getConfiguration("commanderV"),l=n.workspace.workspaceFolders[0].uri.fsPath,u=o.join(l,"v.config.js"),f=n.Uri.file(u);let d={};try{await n.workspace.fs.stat(f),d=r(641)(u)}catch(e){}const h=function(e,t){return{...e,...t}}(p,d),w=await async function(e){const t=[];for(const r of e){const o=r.fsPath,i=await n.workspace.fs.stat(r);if(i.type===n.FileType.File){if(c(await n.workspace.fs.readFile(r))){if(1===e.length)return n.window.showInformationMessage("Commander V does not support binary files."),[]}else t.push({type:"file",path:o})}else i.type===n.FileType.Directory&&t.push({type:"directory",path:o})}return t}(t),m=await async function(e,t){let r=[];for(const t of e)if("file"===t.type)r.push(t.path);else if("directory"===t.type){const e=await a(t.path);r.push(...e)}"treeOrder"===t&&(r=r.sort(((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"}))));return r}(w,h.orderFilesBy);let y="";h.includeProjectTree&&(y=await s(l,h.projectTreeDepth,h.ignoreFile,m,h.pruneProjectTree));const g=await async function(e){const t=[];for(const r of e){const e=n.Uri.file(r),o=await n.workspace.fs.readFile(e);t.push(o.toString())}return t}(m),x=function(e,t){return e.map((e=>e.replace(t,"")))}(m,l);var v,F,j,k;const T=function(e,t,r,n,o,i){let s="";i&&(s+="```\n");if(s+=e?`${e}\n\n`:"",r){const e="\n"+n.repeat(o)+"\n\n";s+=t.join(e)}else s+=t.join("\n\n");i&&(s+="\n```");return s}(y,(v=x,F=g,j=h.commentAtFileBegin,k=h.commentAtFileEnd,F.map(((e,t)=>{const r=v[t];return`${j.replace("$file",r)}\n${e}\n${k.replace("$file",r)}\n`}))),h.includeSeparator,h.separatorCharacter,h.separatorLength,h.wrapInCodeBlock);await n.env.clipboard.writeText(T);const E=m.length,$=T.length;h.playSoundOnComplete&&i.play(o.join(__dirname,"src","success.wav"),(e=>{e&&console.error("Error playing sound:",e)}));const b=new n.MarkdownString("[Manage Extension](command:workbench.extensions.action.showExtension?%22kerns.commander-v%22)");n.window.showInformationMessage(`✌️ Commander copied ${E} files (${$} chars) to your clipboard`,b)}));e.subscriptions.push(t)},deactivate:function(){}}},73:(e,t,r)=>{const n=r(886),o=r(574),i=r(896),s=r(928);function a(e,t,r,n,o){const i=!n&&function(e,t){return t.some((t=>t.test(e)))}(e.path,t),s=function(e,t,r){return t&&!function(e,t){return t.some((t=>t.includes(e)))}(e,r)}(e.path,n,r);if(i||s)return null;const c={label:e.name};return e.children&&e.children.length>0&&(c.nodes=e.children.map((e=>a(e,t,r,n,o))).filter((e=>null!==e)),c.label+="/"),c}function c(e,t,r,n){return e?function(e,t){const r=e.split(s.sep).length;let n=0;return t.forEach((e=>{const t=e.split(s.sep).length-r;t>n&&(n=t)})),n}(r,n):t}e.exports={generateProjectTree:async function(e,t,r=".gitignore",p=[],l=!1){const u=await async function(e){const t=[];try{(await i.promises.readFile(e,"utf8")).split("\n").map((e=>e.trim())).forEach((e=>{if(e.startsWith("#")||""===e)return;const r=new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));t.push(r)}))}catch(e){console.error("Error reading ignore file:",e)}return t}(s.join(e,r)),f=c(l,t,e,p),d=a(o(e,{depth:f}),u,p,l,r);return n(d)}}},641:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=641,e.exports=t},886:e=>{"use strict";e.exports=require("@agarimo/archy")},574:e=>{"use strict";e.exports=require("directory-tree")},216:e=>{"use strict";e.exports=require("play-sound")},398:e=>{"use strict";e.exports=require("vscode")},896:e=>{"use strict";e.exports=require("fs")},928:e=>{"use strict";e.exports=require("path")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);r(12)})();